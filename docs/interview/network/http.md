# HTTP

[HTTP](https://developer.mozilla.org/zh-CN/docs/Web/HTTP) 全称为 HyperText Transfer Protocol，即超文本传输协议，是一个用于传输超媒体文档(例如 `HTML`)的应用层协议

::: tip HTTP 协议的主要特点

- 是一个应用层协议
- **遵循经典的“客户端-服务端”模型**(客户端发送请求，服务器返回响应)
- **灵活可扩展**
  - 语义上的自由，只规定了报文的基本格式，报文里的各个组成部分可以由开发者任意定制
  - 传输格式的多样性
- **无连接**: 每完成一个请求就断开连接(HTTP/1.1 后默认开启长连接)
- **无状态**: HTTP 协议对于事务处理没有记忆能力(每个请求之间、浏览器和服务器之间都是相互独立毫无关联的)
- **可靠传输**: HTTP 协议是一个可靠的传输协议(基于 TCP/IP 协议)
- **明文传输**: 协议里的报文直接使用文本形式传输(HTTP/2.0 后改为二进制传输)

:::

## HTTP 协议的演变

[HTTP 协议演进与各版本特性](https://mp.weixin.qq.com/s/RuHaKgwpCMvPQeEwe31k2A)

### HTTP/0.9

> 1990 年问世

功能简陋，只有一个 `GET` 方法，且只支持纯文本内容

### HTTP/1.0

> 1996 年 5 月正式发布

- 任何格式的内容都可以发送
- 请求和响应增加了头信息
- 新增方法: `POST HEAD`
- 添加了状态码、多字符集支持、权限、缓存、内容编码等功能

### HTTP/1.1

> 1997 年 1 月发布，是**目前主流的 HTTP 协议版本**

- **长连接**: TCP 连接默认不关闭可以被多个请求复用
- **管道机制**: 在同一个 TCP 链接里面，客户端可以同时发送多个请求
- **分块传输编码**
- 缓存处理: `Cache-Control` 和 `Etag/If-None-Match`
- 断点续传
- 增加了 `TLS` 支持: 支持 `HTTPS` 传输
- 新增方法: `PUT PATCH OPTIONS DELETE`

::: warning HTTP/1.1 缺点

- 单路连接请求低效: 每个 TCP 连接只能对应一个 HTTP 请求
- 队头阻塞: 当顺序发送的请求序列中的一个请求因为某种原因被阻塞时，在后面排队的所有请求也一并被阻塞，会导致客户端迟迟收不到数据。
- 头信息冗余
- 只允许由客户端主动发起请求
- 明文传输

:::

### HTTP/2.0

> 2015 年发布

- **二进制传输**: 头信息和数据体都是二进制
- **多路复用/二进制分帧**: 在一个 TCP 连接中可以同时发送多个请求
- **头部压缩**
- **服务器推送**: 允许服务器未经请求主动向客户端发送资源
- **请求优先级**

::: warning HTTP/2.0 缺点

- 建立连接时间长(本质上是 TCP 的问题)
- 没有彻底解决队头阻塞问题
- 弱网环境表现不佳

:::

### HTTP/3.0

HTTP/3.0 又称为 HTTP Over QUIC，其弃用 TCP 协议，改为使用基于 UDP 协议的 QUIC 协议来实现

- 实现了类似 TCP 的流量控制、传输可靠性的功能
- 实现了快速握手功能
- 集成了 TLS 加密功能
- 多路复用，彻底解决 TCP 中队头阻塞的问题
